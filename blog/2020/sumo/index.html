<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> SUMO — a Traffic Simulator over the Cloud with Yonohub | Ahmed M. Hendawy </title> <meta name="author" content="Ahmed M. Hendawy"> <meta name="description" content="Intelligent Transportation System is an essential building block of full autonomy on the roads. To have a safe, sustainable, and efficient autonomous system in our daily life, a complex traffic…"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8F%B9&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="ahmedhendawy.de/blog/2020/sumo/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?bf50d6d9dd867d3e0f3b0add94449649"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Ahmed </span> M.  Hendawy </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">SUMO — a Traffic Simulator over the Cloud with Yonohub</h1> <p class="post-meta"> June 01, 2020 </p> <p class="post-tags"> <a href="/blog/2020"> <i class="fa-solid fa-calendar fa-sm"></i> 2020 </a>   ·   <a href="/blog/tag/sumo"> <i class="fa-solid fa-hashtag fa-sm"></i> SUMO</a>     ·   <a href="/blog/category/yonohub"> <i class="fa-solid fa-tag fa-sm"></i> Yonohub</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p align="center"> <img src="https://miro.medium.com/max/700/1*RLi4jgINeNszuFafJ-vnpQ.png" width="800px" title="SUMO" alt="SUMO"> </p> <p align="center"> SUMO </p> <p>Intelligent Transportation System is an essential building block of full autonomy on the roads. To have a safe, sustainable, and efficient autonomous system in our daily life, a complex traffic system should be deployed on our normal roads. Vehicles should communicate with each other as well as with the road to send and receive some information.</p> <p>This can be exemplified by assuming that we have a traffic jam in one of the intersections in the city. If we have a standard traffic lighting system, we can not normally solve the problem. On the other hand, assume that we have an intelligent system that interacts with the vehicles by receiving their locations and speed, the system at that point can change the traffic light sequence timing to resolve that issue. But how can we implement such an algorithm in the first place? Are we going to test it directly on the road?</p> <p>Now, the traffic simulation comes to place. It facilitates the implementation, evaluation, and testing of such algorithms. However, it is not easy to find such a comprehensive simulator. But we have <a href="https://sumo.dlr.de/docs/" rel="external nofollow noopener" target="_blank">SUMO</a>!</p> <h2 id="sumo">SUMO</h2> <blockquote> <p><strong>“S</strong>imulation of <strong>U</strong>rban <strong>MO</strong>bility” (Eclipse SUMO) is an open-source, highly portable, microscopic, and continuous road traffic simulation package designed to handle large road networks.</p> </blockquote> <p align="center"> <img src="https://cdn-images-1.medium.com/max/2560/1*l8m3a4PnxCnOlmOUkEtNhw.gif" width="800px" title="SUMO Scenario" alt="SUMO Scenario"> </p> <p align="center"> SUMO Scenario </p> <h3 id="what-features-offered-by-sumo">What features offered by SUMO?</h3> <ul> <li> <p>Microscopic simulation — vehicles, pedestrians and public transport are modeled explicitly</p> </li> <li> <p>Online interaction — control the simulation with <a href="https://sumo.dlr.de/docs/TraCI.html" rel="external nofollow noopener" target="_blank">TraCI</a></p> </li> <li> <p>Simulation of multimodal traffic, e.g., vehicles, public transport, and pedestrians</p> </li> <li> <p>Time schedules of traffic lights can be imported or generated automatically by SUMO</p> </li> <li> <p>No artificial limitations in network size and the number of simulated vehicles</p> </li> <li> <p>Supported import formats: <a href="https://sumo.dlr.de/docs/Networks/Import/OpenStreetMap.html" rel="external nofollow noopener" target="_blank">OpenStreetMap</a>, <a href="https://sumo.dlr.de/docs/Networks/Import/VISUM.html" rel="external nofollow noopener" target="_blank">VISUM</a>, <a href="https://sumo.dlr.de/docs/Networks/Import/Vissim.html" rel="external nofollow noopener" target="_blank">VISSIM</a>, <a href="https://sumo.dlr.de/docs/Networks/Import/DlrNavteq.html" rel="external nofollow noopener" target="_blank">NavTeq</a></p> </li> <li> <p>SUMO is implemented in C++ and uses only portable libraries</p> </li> </ul> <p>SUMO is a powerful simulator for researchers, developers, and enthusiasts. Two ways are normally used to use any simulator. Either by running it on a local machine or over the cloud. Sadly, running the simulator locally is a bottleneck for many developers with any powerful simulator due to the available computational power. Fortunately, we can use <a href="https://yonohub.com/" rel="external nofollow noopener" target="_blank">Yonohub</a>.</p> <h2 id="how-to-integrate-sumo-in-yonohub">How to integrate SUMO in Yonohub?</h2> <p>Not only the computational power in Yonohub we want to get benefit from, however the encapsulation concept in <a href="https://yonohub.com/yonoarc/" rel="external nofollow noopener" target="_blank">YonoArc</a> by designing your simulation scenario as a pipeline with different pieces of code encapsulated in blocks.</p> <h3 id="sumo-environment">SUMO Environment</h3> <p>Normally step zero will be the installation of SUMO. Yonohub offers <a href="https://yonohub.com/yonoebuilder/" rel="external nofollow noopener" target="_blank">YonoEBuilder</a> which facilitates the steps of creating environments with few clicks. You can reuse and share the environments easily. For SUMO, you can even forget step zero as we published an <a href="https://store.yonohub.com/product/sumo-environment/" rel="external nofollow noopener" target="_blank">environment</a>, which contains the latest version of SUMO, in <a href="https://yonohub.com/yonostore/" rel="external nofollow noopener" target="_blank">YonoStore</a>. Here is a view of the SUMO environment developed using YonoEBuilder,</p> <p align="center"> <img src="https://cdn-images-1.medium.com/max/2000/1*rEw8V8a8xSJhM4y6vakwTg.png" width="800px" title="SUMO Environment" alt="SUMO Environment"> </p> <p align="center"> SUMO Environment </p> <p>As we can notice, the environment installs SUMO, clones the official repository, and setups <a href="https://novnc.com/info.html" rel="external nofollow noopener" target="_blank">noVNC</a> to visualize SUMO.</p> <p><strong>NOTE</strong>: You can use this environment in a <a href="https://docs.yonohub.com/docs/yonohub/custom-apps/" rel="external nofollow noopener" target="_blank">custom app</a> in the phase of creating a network in <a href="https://sumo.dlr.de/docs/NETEDIT.html" rel="external nofollow noopener" target="_blank">NETEDIT</a> as well as interacting with SUMO-GUI directly.</p> <h3 id="scenario">Scenario</h3> <p>Traffic Light System (TLS) is the scenario integrated. We used the pre-implemented TLS <a href="https://github.com/eclipse/sumo/tree/master/tests/complex/tutorial/traci_tls" rel="external nofollow noopener" target="_blank">example</a> in SUMO. The example uses the TraCI API to interact with SUMO via a client-server protocol, where SUMO acts as the server and TraCI as the client.</p> <h3 id="sumo-yonoarc-block">SUMO YonoArc Block</h3> <p>Next, we use that environment to develop a YonoArc block. We used the Block Manager to create the YonoArc block. The SUMO block encapsulates the following functionalities,</p> <ul> <li> <p>Running noVNC in a background process.</p> </li> <li> <p>Testing the above TLS scenario.</p> </li> <li> <p>Streaming some data related to the simulation to be visualized through the Dashboard.</p> </li> </ul> <p>To implement the above functionalities, we created the SUMO block using the <a href="https://docs.yonohub.com/docs/yonohub/yonoarc/yonoarc-python3-api/" rel="external nofollow noopener" target="_blank">YonoArc Python 3 API</a>. The python 3 source code of the block is an integration of the Python 3 API and the TLS <a href="https://github.com/eclipse/sumo/blob/master/tests/complex/tutorial/traci_tls/runner.py" rel="external nofollow noopener" target="_blank">example</a> as shown below,</p> <script src="https://gist.github.com/AhmedMagdyHendawy/7c52f4c503e97a1b38f3e17e0d81f66b.js"></script> <p>In the <em>on_start(self)</em> function, we run noVNC as a separate process. Then, generating the routes and randomly assign 3600 vehicles to the created routes, using <em>generate_routefile()</em> function. Next, we start SUMO using the <em>start</em> function in TraCI which establishes as well the client-server communication.</p> <p>After that, the <em>run(self)</em> function is called. The function simply calls another function called <em>run_scenario(self)</em> which is responsible for the changing of the traffic light sequence as well as publish the following data related to one of the vehicles,</p> <ul> <li> <p>Position</p> </li> <li> <p>Speed</p> </li> <li> <p>Acceleration</p> </li> <li> <p>Lateral Speed</p> </li> <li> <p>Waiting Time</p> </li> </ul> <p>All these data are published through the block’s ports. All the information is extracted and streamed each step of the simulation to be visualized in YonoArc via the Dashboard.</p> <p>Moreover, we need to add the noVNC URL to the block during creation to be able of opening noVNC in YonoArc.</p> <p align="center"> <img src="https://cdn-images-1.medium.com/max/2216/1*I6VmkFOPKRaknQ-z47E-nw.png" width="800px" title="URL Insertion" alt="URL Insertion"> </p> <p align="center"> URL Insertion </p> <p>Now, you successfully create the SUMO YonoArc block and ready to construct the pipeline in YonoArc.</p> <h3 id="how-to-use-sumo-in-yonohub">How to Use SUMO in Yonohub?</h3> <p>Let us demonstrate the utilization of the SUMO block in the following video tutorial by forming a pipeline which runs the TLS scenario and visualize some data.</p> <p align="center"> <a href="https://www.youtube.com/watch?v=7-fWAOZOP18" rel="external nofollow noopener" target="_blank"><img src="http://img.youtube.com/vi/7-fWAOZOP18/0.jpg" width="800px" title="SUMO TLS Tutorial in Yonohub" alt="SUMO TLS Tutorial in Yonohub"></a> </p> <p align="center"> SUMO TLS Tutorial in Yonohub </p> <p>All the <a href="https://store.yonohub.com/product/sumo/" rel="external nofollow noopener" target="_blank">blocks</a> you can freely purchase it from YonoStore. You can download the arc file of the tutorial above directly from <a href="https://github.com/YonoHub/SUMO---a-Traffic-Simulator-over-the-Cloud-with-YonoHub" rel="external nofollow noopener" target="_blank">here</a> as well as the source code of the SUMO YonoArc block.</p> <h2 id="conclusion">Conclusion</h2> <p>To sum up, we demonstrated the process of integrating SUMO in Yonohub and using it that shows the capability of SUMO for traffic simulation in addition to Yonohub’s computational power as well as the encapsulation concept in YonoArc.</p> <h2 id="about-yonohub">About Yonohub</h2> <blockquote> <p>Yonohub is a web-based cloud system for development, evaluation, integration, and deployment of complex systems, including Artificial Intelligence, Autonomous Driving, and Robotics. Yonohub features a drag-and-drop tool to build complex systems, a marketplace to share and monetize blocks, a builder for custom development environments, and much more. YonoHub can be deployed on-premises and on-cloud.</p> </blockquote> <p>Get $25 free credits when you sign up now. For researchers and labs, contact us to learn more about Yonohub sponsorship options.</p> <p>If you liked this article, please consider following us on Twitter at <a href="https://twitter.com/YonoHub" rel="external nofollow noopener" target="_blank">@yonohub</a>, <a href="mailto:info@yonohub.com">email us directly</a>, or<a href="https://www.linkedin.com/showcase/yonohub" rel="external nofollow noopener" target="_blank"> find us on LinkedIn</a>. I’d love to hear from you if I can help you or your team with how to use Yonohub.</p> <h2 id="reference">Reference</h2> <p>[1] <a href="https://sumo.dlr.de/docs/" rel="external nofollow noopener" target="_blank">https://sumo.dlr.de/docs/</a></p> <p>[2] <a href="https://www.dlr.de/ts/en/desktopdefault.aspx/tabid-9883/16931_read-41000/" rel="external nofollow noopener" target="_blank">https://www.dlr.de/ts/en/desktopdefault.aspx/tabid-9883/16931_read-41000/</a></p> <p>[3] <a href="https://verkehrsforschung.dlr.de/de/news/verkehr-basteln-ganz-einfach-mit-sumo" rel="external nofollow noopener" target="_blank">https://verkehrsforschung.dlr.de/de/news/verkehr-basteln-ganz-einfach-mit-sumo</a></p> <p>[4] <a href="https://yonohub.com/" rel="external nofollow noopener" target="_blank">https://yonohub.com/</a></p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Ahmed M. Hendawy. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: October 10, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>